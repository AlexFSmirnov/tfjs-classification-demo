(this["webpackJsonptfjs-classification-demo"]=this["webpackJsonptfjs-classification-demo"]||[]).push([[0],{291:function(n,e){},292:function(n,e){},300:function(n,e){},303:function(n,e){},304:function(n,e){},306:function(n,e,t){},307:function(n,e,t){"use strict";t.r(e);var r=t(43),i=t(38),o=t.n(i),a=t(236),c=t.n(a),u=t(4),d=t.n(u),s=t(12),l=t(5),f=t(10),p=t(14),h=t(15),v=t(194),g=t(19),b=32,x=["30","31","32","33","34","35","36","37","38","39","41","42","43_63","44","45","46","47","48","49_69","4a_6a","4b_6b","4c_6c","4d_6d","4e","4f_6f","50_70","51","52","53_73","54","55_75","56_76","57_77","58_78","59_79","5a_7a","61","62","64","65","66","67","68","6e","71","72","74"],j=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","0","1","2","3","4","5","6","7","8","9"],m=function(n){var e=j.map((function(n){return 0}));x.forEach((function(t,r){var i=t.split("_")[t.split("_").length-1],o=String.fromCharCode(parseInt(i,16)).toUpperCase();e[j.indexOf(o)]+=n[r]}));var t=Math.min.apply(Math,Object(g.a)(e)),r=Math.max.apply(Math,Object(g.a)(e))-t;e=e.map((function(n){return n-t})).map((function(n){return n/r}));var i={};return j.forEach((function(n){i[n]=e[j.indexOf(n)]})),{topCandidate:j[e.indexOf(Math.max.apply(Math,Object(g.a)(e)))],prediction:i}},O=function(){var n={};return j.forEach((function(e){n[e]=0})),n},w=t(256),y=t(6),C=t(64),k=t(65);function _(){var n=Object(C.a)(["\n    width: 100%;\n    padding: 8px 2px;\n    border-radius: 4px;\n\n    text-align: center;\n    user-select: none;\n    font-size: 18pt;\n    color: white;\n    background-color: #444;\n\n    transition: background-color 200ms;\n\n    &:hover {\n        background-color: #3a3a3a;\n    }\n\n    &:active {\n        background-color: #222;\n    }\n"]);return _=function(){return n},n}var M=k.a.div(_()),P=function(n){var e=n.children,t=n.onClick;return Object(r.jsx)(M,{onClick:function(n){t&&t(n)},children:e})};function S(){var n=Object(C.a)(["\n    width: ","px;\n    height: ","px;\n    margin-bottom: 8px;\n\n    border: 2px solid #444;\n    border-radius: 8px;\n\n    image-rendering: pixelated;\n    image-rendering: -moz-crisp-edges;\n    image-rendering: crisp-edges;\n"]);return S=function(){return n},n}function U(){var n=Object(C.a)(["\n    width: ","px;\n    padding: 8px;\n\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n"]);return U=function(){return n},n}var W=k.a.div(U(),256),E=k.a.canvas(S(),256,256),R=function(n){var e=n.onChange,t=n.onPointerUp,o=Object(i.useRef)(null),a=Object(i.useRef)(null),c=Object(i.useRef)(0),u=function(){var n=o.current;if(n){var e=n.getContext("2d");e&&(e.beginPath(),e.rect(0,0,b,b),e.fillStyle="white",e.fill())}};Object(i.useEffect)(u,[o]);var d={ref:o,width:b,height:b,onPointerMove:function(n){var t=o.current;if(t){var r=t.getContext("2d");if(r){var i=n.buttons,u=n.clientX,d=n.clientY,s=(u-t.getBoundingClientRect().x)/8,l=(d-t.getBoundingClientRect().y)/8;if(!i)return void(a.current=null);if(a.current)for(var f=0;f<5;++f){var p=a.current,h=p.x,v=p.y;r.beginPath(),r.moveTo(h,v),r.lineTo(s,l),r.lineWidth=2,r.stroke()}a.current={x:s,y:l}}}var g=(new Date).getTime();e&&g-c.current>200&&(c.current=g,e(function(){var n=o.current;if(!n)return null;var e=n.getContext("2d");if(!e)return null;for(var t=[],r=0;r<b;++r){for(var i=[],a=0;a<b;++a){var c=Object(y.a)(e.getImageData(a,r,1,1).data,3),u=c[0],d=c[1],s=c[2];i.push([u/255,d/255,s/255])}t.push(i)}return t}()))},onPointerUp:function(){a.current=null,t&&t()}};return Object(r.jsxs)(W,{children:[Object(r.jsx)(E,Object(w.a)({},d)),Object(r.jsx)(P,{onClick:u,children:"Clear"})]})};function A(){var n=Object(C.a)(["\n    width: 64px;\n    height: 64px;\n    margin: 10px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-radius: 4px;\n    background-color: rgb(0, 255, 0, ",");\n    font-size: 18pt;\n"]);return A=function(){return n},n}var T=k.a.div(A(),(function(n){return Math.pow(n.value,15)})),z=function(n){var e=n.value,t=n.children;return Object(r.jsx)(T,{value:e,children:t})};function B(){var n=Object(C.a)(["\n    height: 336px;\n    width: 756px;\n    margin: 8px;\n\n    display: flex;\n    flex-wrap: wrap;\n"]);return B=function(){return n},n}function D(){var n=Object(C.a)(["\n    height: 300px;\n    margin-top: 2px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n"]);return D=function(){return n},n}var I=k.a.div(D()),J=k.a.div(B()),L=function(n){var e=n.prediction;return Object(r.jsx)(I,{children:Object(r.jsx)(J,{children:Object.keys(e).map((function(n){return Object(r.jsx)(z,{value:e[n],children:n},n)}))})})};function N(){var n=Object(C.a)(["\n    font-size: 50pt;\n"]);return N=function(){return n},n}function F(){var n=Object(C.a)(["\n    width: 256px;\n    height: 309px;\n    border: 2px solid #444;\n    border-radius: 8px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    font-size: 156pt;\n"]);return F=function(){return n},n}function X(){var n=Object(C.a)(["\n    width: 1304px;\n    height: 329px;\n    padding: 12px 0px;\n    padding-right: 2px;\n    padding-left: 16px;\n\n    display: flex;\n    justify-content: center;\n    align-items: center;\n\n    box-shadow: 0 0 16px rgba(0, 0, 0, 0.5);\n    border-radius: 16px;\n"]);return X=function(){return n},n}var Y=k.a.div(X()),G=k.a.div(F()),H=k.a.div(N()),K=function(n){Object(p.a)(t,n);var e=Object(h.a)(t);function t(){var n;Object(l.a)(this,t);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return(n=e.call.apply(e,[this].concat(i))).model=null,n.prediction={},n.state={prediction:O(),topCandidate:"?"},n.loadModel=Object(s.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("".concat("/tfjs-classification-demo","/model/model.json"));case 2:n.model=e.sent,n.forceUpdate();case 4:case"end":return e.stop()}}),e)}))),n.predict=function(e){if(n.model){var t=Object(v.b)([e],[1,b,b,3]),r=n.model.predict(t),i=m(Array.from(r.dataSync())),o=i.topCandidate,a=i.prediction;n.prediction=a,n.setState({topCandidate:o})}},n.handleCanvasChange=function(e){e&&n.predict(e)},n.handleCanvasPointerUp=function(){return n.setState({prediction:n.prediction})},n}return Object(f.a)(t,[{key:"componentDidMount",value:function(){this.loadModel()}},{key:"render",value:function(){var n=this.state,e=n.prediction,t=n.topCandidate;return Object(r.jsx)(Y,{children:this.model?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(G,{children:t}),Object(r.jsx)(R,{onChange:this.handleCanvasChange,onPointerUp:this.handleCanvasPointerUp}),Object(r.jsx)(L,{prediction:e})]}):Object(r.jsx)(H,{children:"Model loading..."})})}}]),t}(o.a.Component),Q=(t(306),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)));function V(n,e){navigator.serviceWorker.register(n).then((function(n){n.onupdatefound=function(){var t=n.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e&&e.onUpdate&&e.onUpdate(n)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(n)))})}})).catch((function(n){console.error("Error during service worker registration:",n)}))}c.a.render(Object(r.jsx)(o.a.StrictMode,{children:Object(r.jsx)(K,{})}),document.getElementById("root")),function(n){if("serviceWorker"in navigator){if(new URL("/tfjs-classification-demo",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/tfjs-classification-demo","/service-worker.js");Q?(!function(n,e){fetch(n,{headers:{"Service-Worker":"script"}}).then((function(t){var r=t.headers.get("content-type");404===t.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(n){n.unregister().then((function(){window.location.reload()}))})):V(n,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,n),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):V(e,n)}))}}()}},[[307,1,2]]]);
//# sourceMappingURL=main.df4706bf.chunk.js.map